CREATE DATABASE PROJECT;
USE PROJECT;
CREATE TABLE AIRLINES (
AID VARCHAR (5) PRIMARY KEY,
NAME VARCHAR (20));

CREATE TABLE AIRLINE_CONTACTS(
AID VARCHAR (5),
CONTACT_NO BIGINT (10),
FOREIGN KEY (AID) REFERENCES AIRLINES (AID) ON DELETE CASCADE,
PRIMARY KEY (AID, CONTACT_NO));


CREATE TABLE FLIGHT(
FLIGHT_NO VARCHAR (5) PRIMARY KEY,
GATE INT (2),
ORIGIN VARCHAR (20),
DEST VARCHAR (20),
AID VARCHAR (5),
ETA VARCHAR (8),
ETD VARCHAR (8),
FOREIGN KEY (AID) REFERENCES AIRLINES (AID) ON DELETE CASCADE);


CREATE TABLE CRIMINALS(
SSID VARCHAR (10) PRIMARY KEY,
NAME VARCHAR (20),
NATION VARCHAR (20));


CREATE TABLE PASSENGER_MANAGEMENT(
SSID VARCHAR (10) PRIMARY KEY,
NAME VARCHAR (20),
NATION VARCHAR (20),
VISA VARCHAR (20),
DECLARATIONS VARCHAR (12) CHECK (DECLARATIONS = 'PROVIDED' OR DECLARATIONS = 'NOT PROVIDED'),
FLAG VARCHAR (6) CHECK (FLAG = 'GREEN' OR FLAG = 'RED' OR FLAG = 'YELLOW'),
FLIGHT_NO VARCHAR (5),
FOREIGN KEY (FLIGHT_NO) REFERENCES FLIGHT (FLIGHT_NO) ON DELETE CASCADE);











INSERT INTO AIRLINES VALUES
('45962', 'INDIAN AIRWAYS'),
('20064', 'BRITISH AIRWAYS'),
('59764', 'SRILANKAN AIRWAYS'),
('26485', 'FRENCH AIRLINES'),
('12564', 'KOREAN AIRLINES');



INSERT INTO AIRLINE_CONTACTS VALUES
('45962', '9988665544'),
('45962', '9984565794'),
('20064', '1025346547'),
('59764', '6758420148'),
('26485', '5634052785'),
('26485', '5528675654'),
('12564', '2254864567');


INSERT INTO FLIGHT VALUES
('20035', '5', 'NEW DELHI', 'KOLKOTA',      '45962', NULL, "02:00:00"),
('24654', '6', 'MUMBAI',    'JAMAICA',      '45962', NULL,       NULL),
('53164', '2', 'NEW DELHI', 'PETTERSBURG',  '20064', NULL, "15:30:00"),
('10001', '11', 'LONDON',   'KOLKOTA',      '20064', NULL,       NULL),
('59764', '3', 'NEW DELHI', 'COLOMBO',      '59764', NULL, "02:00:00"),
('78965', '8', 'COLOMBO',   'NEW DELHI',    '59764', "02:00:00", NULL),
('13542', '1', 'PYONGYANG', 'CHENNAI',      '12564', NULL,       NULL),
('67584', '20', 'PARIS',    'NEW DELHI',     '26485', "10:00:00", NULL);


INSERT INTO CRIMINALS VALUES
('5425646451', 'SHYAM', 'INDIAN'),
('1234684575', 'LIZZY', 'BRITISH'),
('5672456451', 'JEAN', 'FRENCH'),
('2354864525', 'JAMES', 'AMERICAN'),
('7896543421', 'SHIN CHAN', 'JAPANESE');


INSERT INTO PASSENGER_MANAGEMENT VALUES
('2165498754', 'SWAMY', 'INDIAN', NULL, 'NOT PROVIDED', 'YELLOW', '20035'),
('1354524342', 'ANAND', 'INDIAN', NULL, 'NOT PROVIDED', 'YELLOW', '20035'),
('3542568465', 'AKSHAY', 'RUSSIAN', '32546', 'PROVIDED', 'GREEN', '13542'),
('1132165464', 'ADITYA', 'KOREAN', '65485', 'PROVIDED', 'GREEN', '67584'),
('1010202122', 'ANAGHA', 'INDIAN', '46124', 'NOT PROVIDED', 'YELLOW', '10001'),
('4535624312', 'AASHISH', 'CHINESE', '23156', 'PROVIDED', 'GREEN', '53164'),
('6542646544', 'AKSHAJA', 'INDIAN', '49565', 'PROVIDED', 'GREEN', '20035'),
('5425646451', 'SHYAM', 'INDIAN', NULL, 'NOT PROVIDED', 'RED', '10001');



CREATE VIEW ARRIVALS AS SELECT * FROM FLIGHT WHERE DEST='NEW DELHI';
CREATE VIEW DEPARTURES AS SELECT * FROM FLIGHT WHERE ORIGIN='NEW DELHI';
CREATE VIEW TRANSITS AS SELECT * FROM FLIGHT WHERE ORIGIN NOT IN ('NEW DELHI') AND DEST NOT IN ('NEW DELHI');